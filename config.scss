@use "sass:map";
//====================
// Light / Dark config
//====================

$op-config: (
  'selector-scope': (
    'where': ':where (html)',
    'root': ':root',
    'host': ':host ()',
    'null': ''
  ),
) !default;

$op-theme: (
  'light': (
    $shadow-color: 220 3% 15%;
    $shadow-strength: 1%;
  ),
  'dark': (
    $shadow-color: 220 40% 2%;
    $shadow-strength: 25%;
  )
) !default;

// the function takes the $selector-scope and $theme as parameters. It first retrieves the selector configuration from $op-config and the theme values from $op-theme. Based on the provided $selector-scope, it generates the appropriate selector output and adds the theme values accordingly. If the $theme is 'dark', it also includes the dark mode media query.


@function generate-output($selector-scope, $theme) {
  $selector-config: map-get($op-config, 'selector-scope');
  $theme-values: map-get($op-theme, $theme);

  $selector-output: '';

  @if ($selector-scope == 'where') {
    $selector-output: ":where#{map-get($selector-config, 'where')} {\n";
  } @else if ($selector-scope == 'root') {
    $selector-output: ":root {\n";
  } @else if ($selector-scope == 'host') {
    $selector-output: ":host#{map-get($selector-config, 'host')} {\n";
  } @else if ($selector-scope == 'null') {
    $selector-output: "#{map-get($selector-config, 'null')} {\n";
  }

  $output: '';

  @if ($selector-output != '') {
    $output: $selector-output +
      "  --shadow-color: #{map-get($theme-values, 'shadow-color')};\n" +
      "  --shadow-strength: #{map-get($theme-values, 'shadow-strength')};\n" +
      "}\n";

    @if ($theme == 'dark') {
      $output: $output +
        "@media (prefers-color-scheme: dark) {\n" +
        "  " + $selector-output +
        "    --shadow-color: #{map-get($theme-values, 'shadow-color')};\n" +
        "    --shadow-strength: #{map-get($theme-values, 'shadow-strength')};\n" +
        "  }\n" +
        "}\n";
    }
  }

  @return $output;
}
